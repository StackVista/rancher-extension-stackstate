(("undefined"!==typeof self?self:this)["webpackChunkobservability_2_1_0"]=("undefined"!==typeof self?self:this)["webpackChunkobservability_2_1_0"]||[]).push([[336],{1261:function(e,t,a){"use strict";async function r(e,t){const a=await e.dispatch("cluster/request",{url:`/k8s/clusters/${t}/v1/apps.deployments`});return a?.data?.filter((e=>e.metadata?.labels&&("suse-observability-agent"===e.metadata.labels["app.kubernetes.io/name"]||"stackstate-k8s-agent"===e.metadata.labels["app.kubernetes.io/name"])))}a.d(t,{X:function(){return r}})},9091:function(e,t,a){"use strict";a.d(t,{A:function(){return c}});var r=a(9274);function s(e,t,a,s,o,i){return(0,r.openBlock)(),(0,r.createElementBlock)("span",{class:(0,r.normalizeClass)(`healthstate healthstate-${i.badgeColor}`)},(0,r.toDisplayString)(a.health??"LOADING"),3)}var o=a(4576),i={name:"HealthState",props:{health:{type:String,default:null},color:{type:String,default:null}},computed:{badgeColor(){if(this.color)return this.color;switch(this.health){case o.z6.CLEAR:return"green";case o.z6.DEVIATING:return"orange";case o.z6.CRITICAL:return"red";case o.z6.UNKNOWN:case o.z6.NOT_MONITORED:return"grey";default:return"skeleton"}}}},l=(a(3541),a(7433));const n=(0,l.A)(i,[["render",s],["__scopeId","data-v-2ec76faa"]]);var c=n},4336:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return I}});var r=a(9274);const s=e=>((0,r.pushScopeId)("data-v-07295b21"),e=e(),(0,r.popScopeId)(),e),o={class:"observability-card"},i=s((()=>(0,r.createElementVNode)("div",{class:"logo"},null,-1))),l={class:"observability-card-content"},n={key:0},c={key:1,class:"flex-text"},d={key:2},u={class:"mb-20"},h={class:"flex-text"},b={key:3},p={class:"mb-20"},v={class:"item-count"},f={class:"item-count"};function g(e,t,a,s,g,y){const m=(0,r.resolveComponent)("router-link"),N=(0,r.resolveComponent)("HealthState"),C=(0,r.resolveComponent)("HealthDisc");return(0,r.openBlock)(),(0,r.createElementBlock)("div",o,[i,(0,r.createElementVNode)("div",l,[e.$fetchState.pending?((0,r.openBlock)(),(0,r.createElementBlock)("p",n,(0,r.toDisplayString)(e.t("observability.clusterCard.connecting")),1)):g.isConfigured?g.isConfigured&&!y.isObserved?((0,r.openBlock)(),(0,r.createElementBlock)("div",d,[(0,r.createElementVNode)("p",u,[(0,r.createTextVNode)((0,r.toDisplayString)(e.t("observability.clusterCard.clusterIs"))+" ",1),(0,r.createVNode)(N,{class:"state-badge",health:"unobserved",color:"grey"})]),(0,r.createElementVNode)("div",h,[(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(e.t("observability.clusterCard.notObservedPrepend")),1),(0,r.createVNode)(m,{to:y.chartRoute},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)((0,r.toDisplayString)(e.t("observability.clusterCard.notObservedInstall")),1)])),_:1},8,["to"]),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(e.t("observability.clusterCard.notObservedPostpend")),1)])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",b,[(0,r.createElementVNode)("p",p,[(0,r.createTextVNode)((0,r.toDisplayString)(e.t("observability.clusterCard.clusterHealth"))+" ",1),(0,r.createVNode)(N,{health:"observed",color:"green"})]),(0,r.createElementVNode)("div",null,[(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(e.t("observability.clusterCard.componentsHealth")),1),(0,r.createElementVNode)("p",null,[(0,r.createVNode)(C,{health:g.HEALTH_STATE_TYPES.DEVIATING},null,8,["health"]),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.t("observability.clusterCard.deviating"))+" ",1),(0,r.createElementVNode)("span",v,(0,r.toDisplayString)(y.countDeviating),1)]),(0,r.createElementVNode)("p",null,[(0,r.createVNode)(C,{health:g.HEALTH_STATE_TYPES.CRITICAL},null,8,["health"]),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.t("observability.clusterCard.critical"))+" ",1),(0,r.createElementVNode)("span",f,(0,r.toDisplayString)(y.countCritical),1)])])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",c,[(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(e.t("observability.clusterCard.notConnectedPrepend")),1),(0,r.createVNode)(m,{to:g.extensionDashboardRoute},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)((0,r.toDisplayString)(e.t("observability.clusterCard.notConnectedObservability")),1)])),_:1},8,["to"])]))])])}var y=a(4220),m=a(4373),N=a(1261),C=a(4576),x=a(9091);function k(e,t,a,s,o,i){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:(0,r.normalizeClass)(`healthdisc-${a.health}`)},null,2)}var E={name:"HealthDisc",props:{health:{type:String,default:C.z6.UNKNOWN}}},S=(a(6107),a(7433));const V=(0,S.A)(E,[["render",k],["__scopeId","data-v-a55bfb62"]]);var A=V,T={name:"ObservabilityClusterCard",components:{HealthState:x.A,HealthDisc:A},props:{resource:{type:Object,required:!0}},computed:{countDeviating(){return this.deviating},countCritical(){return this.critical},isObserved(){return this.observed.length>0},chartRoute(){return{name:"c-cluster-apps-charts-chart",params:{[y.GK]:this.resource?.id},query:{[y.Eo]:"cluster",[y.NO]:"rancher-partner-charts",[y.RX]:"stackstate-k8s-agent"}}}},data(){return{observed:[],snapshot:void 0,deviating:0,critical:0,isConfigured:!0,HEALTH_STATE_TYPES:C.z6,extensionDashboardRoute:{name:`${C.WQ}-c-cluster-dashboard`,params:{[y.GK]:C.wf}}}},async fetch(){if(this.isMissingCrd=!(0,m.Fg)(this.$store),this.isMissingCrd)return void(this.isConfigured=!1);const e=await(0,m.$8)(this.$store);if(!e)return void(this.isConfigured=!1);const t=await(0,N.X)(this.$store,this.resource.id);if(t){this.snapshot=await(0,m.dV)(this.$store,`not healthstate in ("CLEAR", "UNKNOWN") AND label = "cluster-name:${this.resource.spec.displayName}"`,e);for(const e of this.snapshot.viewSnapshotResponse.components)"DEVIATING"===e.state.healthState?this.deviating++:"CRITICAL"===e.state.healthState&&this.critical++;this.observed=t}}};a(7921);const D=(0,S.A)(T,[["render",g],["__scopeId","data-v-07295b21"]]);var I=D},4539:function(e,t,a){"use strict";a.r(t);var r=a(6758),s=a.n(r),o=a(6173),i=a.n(o),l=i()(s());l.push([e.id,".healthdisc-CLEAR[data-v-a55bfb62]{background-color:#2b9e40}.healthdisc-DEVIATING[data-v-a55bfb62]{background-color:#ff8a1e}.healthdisc-CRITICAL[data-v-a55bfb62]{background-color:#eb5757}.healthdisc-UNKNOWN[data-v-a55bfb62]{background-color:#878e98}.healthdisc-CLEAR[data-v-a55bfb62],.healthdisc-CRITICAL[data-v-a55bfb62],.healthdisc-DEVIATING[data-v-a55bfb62],.healthdisc-UNKNOWN[data-v-a55bfb62]{display:inline-block;box-sizing:border-box;border-radius:9999px;width:8px;height:8px}",""]),t["default"]=l},5685:function(e,t,a){"use strict";a.r(t);var r=a(6758),s=a.n(r),o=a(6173),i=a.n(o),l=i()(s());l.push([e.id,".healthstate-green[data-v-2ec76faa]{color:#2b9e40}.healthstate-orange[data-v-2ec76faa]{color:#ff8a1e}.healthstate-red[data-v-2ec76faa]{color:#eb5757}.healthstate-grey[data-v-2ec76faa]{color:#878e98}.healthstate-skeleton[data-v-2ec76faa]{cursor:wait;color:#d9d9d9;background-color:#d9d9d9}.healthstate[data-v-2ec76faa]{display:inline-block;border-width:1px;border-style:solid;border-radius:20px;padding:2px 10px;height:21px;line-height:16px;text-transform:uppercase;font-size:.75rem;letter-spacing:.3px;font-weight:500}",""]),t["default"]=l},1361:function(e,t,a){"use strict";a.r(t);var r=a(6758),s=a.n(r),o=a(6173),i=a.n(o),l=a(62),n=a.n(l),c=new URL(a(9876),a.b),d=i()(s()),u=n()(c);d.push([e.id,".observability-card[data-v-07295b21]{line-height:19px;font-size:14px;align-items:center;display:flex;margin-top:30px}.observability-card .logo[data-v-07295b21]{background-size:contain;background-repeat:no-repeat;width:100px;height:100px;margin-right:16px;background-image:url("+u+")}.observability-card .observability-card-content[data-v-07295b21]{display:flex;flex-direction:column}.observability-card .observability-card-content .state-badge[data-v-07295b21]{margin-left:6px}.observability-card .observability-card-content .flex-text[data-v-07295b21]{display:flex}.observability-card .observability-card-content .flex-text a[data-v-07295b21]{margin:0 3px}.observability-card .observability-card-content .item-count[data-v-07295b21]{margin-left:8px}.theme-dark div.logo[data-v-07295b21]{background-image:url("+u+");filter:invert(1)}",""]),t["default"]=d},62:function(e){"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},6107:function(e,t,a){var r=a(4539);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var s=a(4825).A;s("0fb3a772",r,!0,{sourceMap:!1,shadowMode:!1})},3541:function(e,t,a){var r=a(5685);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var s=a(4825).A;s("ada042fc",r,!0,{sourceMap:!1,shadowMode:!1})},7921:function(e,t,a){var r=a(1361);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var s=a(4825).A;s("28b10b13",r,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=observability-2.1.0.umd.min.336.js.map