(("undefined"!==typeof self?self:this)["webpackJsonpobservability_0_1_0"]=("undefined"!==typeof self?self:this)["webpackJsonpobservability_0_1_0"]||[]).push([[5],{"0450":function(t,e,a){var r=a("0a73");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var s=a("0ed3").default;s("18c10815",r,!0,{sourceMap:!1,shadowMode:!1})},"0a73":function(t,e,a){var r=a("5eaa");e=r(!1),e.push([t.i,"div.card[data-v-be0d1728]{line-height:19px;font-size:14px;align-items:center;display:flex}span.spacer[data-v-be0d1728]{margin-left:4px}",""]),t.exports=e},"0ff0":function(t,e,a){"use strict";a("fa8f")},"297f":function(t,e,a){var r=a("5eaa");e=r(!1),e.push([t.i,".healthstate-green[data-v-52b3cd62]{color:#2b9e40;border-color:#2b9e40}.healthstate-orange[data-v-52b3cd62]{color:#ff8a1e;border-color:#ff8a1e}.healthstate-red[data-v-52b3cd62]{border-color:#eb5757;color:#eb5757}.healthstate-grey[data-v-52b3cd62]{border-color:#878e98;color:#878e98}.healthstate-green[data-v-52b3cd62],.healthstate-grey[data-v-52b3cd62],.healthstate-orange[data-v-52b3cd62],.healthstate-red[data-v-52b3cd62]{display:inline-block;border-width:1px;border-style:solid;border-radius:20px;padding:2px 10px;height:21px;line-height:16px;text-transform:uppercase;font-size:.75rem;letter-spacing:.3px;font-weight:500}",""]),t.exports=e},4706:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return t.observed?t.hasMonitors?e("SortableTable",{attrs:{rows:t.monitors,headers:t.MONITOR_HEADERS,"table-actions":!1,"row-actions":!1,"key-field":"checkStateId","default-sort-by":"state",paging:!0,"rows-per-page":40},scopedSlots:t._u([{key:"col:state",fn:function({row:t}){return[e("td",[e("HealthState",{attrs:{state:t.health}})],1)]}},{key:"col:monitor",fn:function({row:a}){return[e("td",[e("a",{attrs:{href:`https://${t.url}/#/components/${encodeURIComponent(t.urn)}`,target:"_blank"}},[t._v(t._s(a.name))])])]}},{key:"col:lastUpdate",fn:function({row:t}){return[e("td",[e("LiveDate",{attrs:{value:t.lastUpdateTimestamp}})],1)]}}])}):e("div",[e("div",{staticClass:"card"},[e("span",[t._v(t._s(t.t("components.monitorTab.noMonitors")))])])]):e("div",[e("div",{staticClass:"card"},[e("span",[t._v(t._s(t.t("components.monitorTab.notEnabled")))])])])},s=[],o=a("9ce4"),n=a("90cd"),i=a("0fb1"),l=a("dd22"),d=a("d395"),c=a("7e32"),u=a("5ed2"),p={name:"MonitorTab",components:{SortableTable:i["a"],HealthState:u["a"],LiveDate:n["a"]},props:{resource:{type:Object,required:!0}},data(){return{MONITOR_HEADERS:c["a"],observed:!1,urn:"",url:"",monitors:[]}},computed:{...Object(o["a"])(["currentCluster"]),clusterId(){var t;return null===(t=this.currentCluster)||void 0===t?void 0:t.id},hasMonitors(){var t;return(null===(t=this.monitors)||void 0===t?void 0:t.length)>0},componentIdentifier(){var t,e,a,r;const s=null===(t=this.currentCluster)||void 0===t?void 0:t.spec.displayName;if(!s)return"";let o="urn:kubernetes:/"+s;return null!==(e=this.resource)&&void 0!==e&&null!==(e=e.metadata)&&void 0!==e&&e.namespace&&(o+=":"+this.resource.metadata.namespace),o+=`:${Object(l["j"])(null===(a=this.resource)||void 0===a||null===(a=a.type)||void 0===a?void 0:a.toLowerCase())}/${null===(r=this.resource)||void 0===r||null===(r=r.metadata)||void 0===r?void 0:r.name}`,o}},async fetch(){if(!Object(l["f"])(this.$store))return;const t=await Object(d["a"])(this.$store,this.clusterId);if(this.observed=(null===t||void 0===t?void 0:t.length)>0,!this.observed)return;const e=await Object(l["i"])(this.$store);this.urn=this.componentIdentifier;const a=await Object(l["g"])(this.$store,e,this.urn);a&&(this.monitors=a.syncedCheckStates,this.url=e.spec.url)}},h=p,f=(a("a1ea"),a("d802")),b=Object(f["a"])(h,r,s,!1,null,"be0d1728",null);e["default"]=b.exports},"5ed2":function(t,e,a){"use strict";var r=function(){var t=this,e=t._self._c;return e("span",[e("div",{class:"healthstate-"+t.badgeColor},[e("span",[t._v(t._s(t.state))])])])},s=[],o=a("a111"),n={name:"HealthState",props:{state:{type:String,default:o["b"].UNKNOWN},color:{type:String,default:null}},computed:{badgeColor(){if(this.color)return this.color;switch(this.state){case o["b"].CLEAR:return"green";case o["b"].DEVIATING:return"orange";case o["b"].CRITICAL:return"red";case o["b"].UNKNOWN:case o["b"].NOT_MONITORED:return"grey"}return this.state}}},i=n,l=(a("0ff0"),a("d802")),d=Object(l["a"])(i,r,s,!1,null,"52b3cd62",null);e["a"]=d.exports},a1ea:function(t,e,a){"use strict";a("0450")},d395:function(t,e,a){"use strict";async function r(t,e){var a;const r=await t.dispatch("cluster/request",{url:`/k8s/clusters/${e}/v1/apps.deployments`});return null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.filter(t=>{var e;return(null===(e=t.metadata)||void 0===e?void 0:e.labels)&&"stackstate-k8s-agent"===t.metadata.labels["app.kubernetes.io/name"]})}a.d(e,"a",(function(){return r}))},fa8f:function(t,e,a){var r=a("297f");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var s=a("0ed3").default;s("03d936a6",r,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=observability-0.1.0.umd.min.5.js.map