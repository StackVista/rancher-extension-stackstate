(("undefined"!==typeof self?self:this)["webpackChunkobservability_2_2_7"]=("undefined"!==typeof self?self:this)["webpackChunkobservability_2_2_7"]||[]).push([[851],{3955:function(e,t,a){"use strict";a.d(t,{A:function(){return c}});var r=a(9274);function o(e,t,a,o,s,i){return(0,r.openBlock)(),(0,r.createElementBlock)("span",{class:(0,r.normalizeClass)(`healthstate healthstate-${i.badgeColor}`)},(0,r.toDisplayString)(a.health??"LOADING"),3)}var s=a(4576),i={name:"HealthState",props:{health:{type:String,default:null},color:{type:String,default:null}},computed:{badgeColor(){if(this.color)return this.color;switch(this.health){case s.z6.CLEAR:return"green";case s.z6.DEVIATING:return"orange";case s.z6.CRITICAL:return"red";case s.z6.UNKNOWN:case s.z6.NOT_MONITORED:return"grey";default:return"skeleton"}}}},l=(a(34),a(7433));const n=(0,l.A)(i,[["render",o],["__scopeId","data-v-28755de2"]]);var c=n},1851:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return w}});var r=a(9274);const o=e=>((0,r.pushScopeId)("data-v-3b8584a0"),e=e(),(0,r.popScopeId)(),e),s={class:"observability-card"},i=o((()=>(0,r.createElementVNode)("div",{class:"logo"},null,-1))),l={class:"observability-card-content"},n={key:0},c={key:1,class:"flex-text"},d={key:2},u={class:"mb-20"},h={key:0,class:"flex-text"},p=["href"],b={key:1},v=["href"],g={key:3},y={class:"mb-20"},f={class:"item-count","data-testid":"obs-deviating-count"},m={class:"item-count","data-testid":"obs-critical-count"};function N(e,t,a,o,N,C){const x=(0,r.resolveComponent)("router-link"),S=(0,r.resolveComponent)("HealthState"),k=(0,r.resolveComponent)("HealthDisc");return(0,r.openBlock)(),(0,r.createElementBlock)("div",s,[i,(0,r.createElementVNode)("div",l,[e.$fetchState.pending?((0,r.openBlock)(),(0,r.createElementBlock)("p",n,(0,r.toDisplayString)(e.t("observability.clusterCard.connecting")),1)):N.isConfigured&&N.observationStatus!==N.ObservationStatus.ConnectionError?N.isConfigured&&N.observationStatus===N.ObservationStatus.NotDeployed?((0,r.openBlock)(),(0,r.createElementBlock)("div",d,[(0,r.createElementVNode)("p",u,[(0,r.createTextVNode)((0,r.toDisplayString)(e.t("observability.clusterCard.clusterIs"))+" ",1),(0,r.createVNode)(S,{class:"state-badge",health:"unobserved",color:"grey"})]),N.agentStatus!==N.AgentStatus.Installed?((0,r.openBlock)(),(0,r.createElementBlock)("div",h,[(0,r.createElementVNode)("p",null,[(0,r.createTextVNode)((0,r.toDisplayString)(e.t("observability.clusterCard.notObservedPrepend"))+" ",1),(0,r.createElementVNode)("a",{href:N.installUrl},(0,r.toDisplayString)(e.t("observability.clusterCard.notObservedInstall")),9,p),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.t("observability.clusterCard.notObservedPostpend")),1)])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",b,[(0,r.createElementVNode)("p",null,[(0,r.createTextVNode)((0,r.toDisplayString)(e.t("observability.clusterCard.noDataPrepend"))+" ",1),(0,r.createElementVNode)("a",{href:N.installUrl},(0,r.toDisplayString)(e.t("observability.clusterCard.noDataInstall")),9,v),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.t("observability.clusterCard.noDataPostpend")),1)])]))])):((0,r.openBlock)(),(0,r.createElementBlock)("div",g,[(0,r.createElementVNode)("p",y,[(0,r.createTextVNode)((0,r.toDisplayString)(e.t("observability.clusterCard.clusterHealth"))+" ",1),(0,r.createVNode)(S,{health:"observed",color:"green"})]),(0,r.createElementVNode)("div",null,[(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(e.t("observability.clusterCard.componentsHealth")),1),(0,r.createElementVNode)("p",null,[(0,r.createVNode)(k,{health:N.HEALTH_STATE_TYPES.DEVIATING},null,8,["health"]),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.t("observability.clusterCard.deviating"))+" ",1),(0,r.createElementVNode)("span",f,(0,r.toDisplayString)(C.countDeviating),1)]),(0,r.createElementVNode)("p",null,[(0,r.createVNode)(k,{health:N.HEALTH_STATE_TYPES.CRITICAL},null,8,["health"]),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.t("observability.clusterCard.critical"))+" ",1),(0,r.createElementVNode)("span",m,(0,r.toDisplayString)(C.countCritical),1)])])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",c,[(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(e.t("observability.clusterCard.notConnectedPrepend")),1),(0,r.createVNode)(x,{to:N.extensionDashboardRoute},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)((0,r.toDisplayString)(e.t("observability.clusterCard.notConnectedObservability")),1)])),_:1},8,["to"])]))])])}var C=a(4220),x=a(7272),S=a(7512),k=a(4576),E=a(3955);function D(e,t,a,o,s,i){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:(0,r.normalizeClass)(`healthdisc-${a.health}`)},null,2)}var V={name:"HealthDisc",props:{health:{type:String,default:k.z6.UNKNOWN}}},T=(a(4678),a(7433));const A=(0,T.A)(V,[["render",D],["__scopeId","data-v-29d526c9"]]);var I=A,_={name:"ObservabilityClusterCard",components:{HealthState:E.A,HealthDisc:I},props:{resource:{type:Object,required:!0}},computed:{countDeviating(){return this.deviating},countCritical(){return this.critical}},data(){return{observationStatus:x.pX.Observed,agentStatus:S.i.Installed,snapshot:void 0,deviating:0,critical:0,isConfigured:!0,installUrl:void 0,HEALTH_STATE_TYPES:k.z6,ObservationStatus:x.pX,AgentStatus:S.i,extensionDashboardRoute:{name:`${k.WQ}-c-cluster-dashboard`,params:{[C.GK]:k.wf}}}},async fetch(){if(this.isMissingCrd=!(0,S.Fg)(this.$store),this.isMissingCrd)return void(this.isConfigured=!1);const e=await(0,S.$8)(this.$store);if(e){this.installUrl=`${e.url}/#/stackpacks/kubernetes-v2`,this.observationStatus=await(0,x.ZT)(this.$store,this.resource.spec.displayName,e),this.observationStatus===x.pX.NotDeployed&&(this.agentStatus=await(0,S.Ww)(this.$store,this.resource.id));try{this.snapshot=await(0,x.dV)(this.$store,`not healthstate in ("CLEAR", "UNKNOWN") AND label = "cluster-name:${this.resource.spec.displayName}"`,e);for(const e of this.snapshot.viewSnapshotResponse.components)"DEVIATING"===e.state.healthState?this.deviating++:"CRITICAL"===e.state.healthState&&this.critical++}catch(t){this.observationStatus===x.pX.Observed&&logger.log("ERROR: Unable to obtain topology, even though cluster is observed",t)}}else this.isConfigured=!1}};a(5394);const O=(0,T.A)(_,[["render",N],["__scopeId","data-v-3b8584a0"]]);var w=O},1062:function(e,t,a){"use strict";a.r(t);var r=a(6758),o=a.n(r),s=a(935),i=a.n(s),l=i()(o());l.push([e.id,".healthdisc-CLEAR[data-v-29d526c9]{background-color:#2b9e40}.healthdisc-DEVIATING[data-v-29d526c9]{background-color:#ff8a1e}.healthdisc-CRITICAL[data-v-29d526c9]{background-color:#eb5757}.healthdisc-UNKNOWN[data-v-29d526c9]{background-color:#878e98}.healthdisc-CLEAR[data-v-29d526c9],.healthdisc-CRITICAL[data-v-29d526c9],.healthdisc-DEVIATING[data-v-29d526c9],.healthdisc-UNKNOWN[data-v-29d526c9]{display:inline-block;box-sizing:border-box;border-radius:9999px;width:8px;height:8px}",""]),t["default"]=l},274:function(e,t,a){"use strict";a.r(t);var r=a(6758),o=a.n(r),s=a(935),i=a.n(s),l=i()(o());l.push([e.id,".healthstate-green[data-v-28755de2]{color:#2b9e40}.healthstate-orange[data-v-28755de2]{color:#ff8a1e}.healthstate-red[data-v-28755de2]{color:#eb5757}.healthstate-grey[data-v-28755de2]{color:#878e98}.healthstate-skeleton[data-v-28755de2]{cursor:wait;color:#d9d9d9;background-color:transparent}.healthstate[data-v-28755de2]{display:inline-block;border-width:1px;border-style:solid;border-radius:20px;padding:2px 10px;height:21px;line-height:16px;text-transform:uppercase;font-size:.75rem;letter-spacing:.3px;font-weight:500}",""]),t["default"]=l},3602:function(e,t,a){"use strict";a.r(t);var r=a(6758),o=a.n(r),s=a(935),i=a.n(s),l=a(62),n=a.n(l),c=new URL(a(9876),a.b),d=i()(o()),u=n()(c);d.push([e.id,".observability-card[data-v-3b8584a0]{line-height:19px;font-size:14px;align-items:center;display:flex;margin-top:30px}.observability-card .logo[data-v-3b8584a0]{background-size:contain;background-repeat:no-repeat;width:100px;height:100px;margin-right:16px;background-image:url("+u+")}.observability-card .observability-card-content[data-v-3b8584a0]{display:flex;flex-direction:column}.observability-card .observability-card-content .state-badge[data-v-3b8584a0]{margin-left:6px}.observability-card .observability-card-content .flex-text[data-v-3b8584a0]{display:flex}.observability-card .observability-card-content .flex-text a[data-v-3b8584a0]{margin:0 3px}.observability-card .observability-card-content .item-count[data-v-3b8584a0]{margin-left:8px}.theme-dark div.logo[data-v-3b8584a0]{background-image:url("+u+");filter:invert(1)}",""]),t["default"]=d},62:function(e){"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},4678:function(e,t,a){var r=a(1062);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var o=a(4825).A;o("734679b9",r,!0,{sourceMap:!1,shadowMode:!1})},34:function(e,t,a){var r=a(274);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var o=a(4825).A;o("7d2d57aa",r,!0,{sourceMap:!1,shadowMode:!1})},5394:function(e,t,a){var r=a(3602);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var o=a(4825).A;o("7696b5b0",r,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=observability-2.2.7.umd.min.851.js.map