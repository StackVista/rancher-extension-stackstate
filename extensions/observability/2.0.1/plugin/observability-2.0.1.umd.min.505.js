(("undefined"!==typeof self?self:this)["webpackChunkobservability_2_0_1"]=("undefined"!==typeof self?self:this)["webpackChunkobservability_2_0_1"]||[]).push([[505],{1261:function(e,t,a){"use strict";async function r(e,t){const a=await e.dispatch("cluster/request",{url:`/k8s/clusters/${t}/v1/apps.deployments`});return a?.data?.filter((e=>e.metadata?.labels&&("suse-observability-agent"===e.metadata.labels["app.kubernetes.io/name"]||"stackstate-k8s-agent"===e.metadata.labels["app.kubernetes.io/name"])))}a.d(t,{X:function(){return r}})},9091:function(e,t,a){"use strict";a.d(t,{A:function(){return i}});var r=a(9274);function o(e,t,a,o,n,s){return(0,r.openBlock)(),(0,r.createElementBlock)("span",{class:(0,r.normalizeClass)(`healthstate healthstate-${s.badgeColor}`)},(0,r.toDisplayString)(a.health??"LOADING"),3)}var n=a(4576),s={name:"HealthState",props:{health:{type:String,default:null},color:{type:String,default:null}},computed:{badgeColor(){if(this.color)return this.color;switch(this.health){case n.z6.CLEAR:return"green";case n.z6.DEVIATING:return"orange";case n.z6.CRITICAL:return"red";case n.z6.UNKNOWN:case n.z6.NOT_MONITORED:return"grey";default:return"skeleton"}}}},l=(a(3541),a(7433));const c=(0,l.A)(s,[["render",o],["__scopeId","data-v-2ec76faa"]]);var i=c},6505:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return k}});var r=a(9274);const o={key:0},n={class:"card"},s={key:1},l={class:"card"},c=["href"];function i(e,t,a,i,d,u){const h=(0,r.resolveComponent)("HealthState"),p=(0,r.resolveComponent)("LiveDate"),f=(0,r.resolveComponent)("SortableTable");return d.observed?u.hasMonitors?((0,r.openBlock)(),(0,r.createBlock)(f,{key:2,rows:d.monitors,headers:d.MONITOR_HEADERS,"table-actions":!1,"row-actions":!1,"key-field":"checkStateId","default-sort-by":"state",paging:!0,"rows-per-page":40},{"col:state":(0,r.withCtx)((({row:e})=>[(0,r.createElementVNode)("td",null,[(0,r.createVNode)(h,{health:e.health},null,8,["health"])])])),"col:monitor":(0,r.withCtx)((({row:e})=>[(0,r.createElementVNode)("td",null,[(0,r.createElementVNode)("a",{href:`https://${d.url}/#/components/${encodeURIComponent(d.urn)}`,target:"_blank",rel:"nofollow noopener noreferrer"},(0,r.toDisplayString)(e.name),9,c)])])),"col:lastUpdate":(0,r.withCtx)((({row:e})=>[(0,r.createElementVNode)("td",null,[(0,r.createVNode)(p,{value:e.lastUpdateTimestamp},null,8,["value"])])])),_:1},8,["rows","headers"])):((0,r.openBlock)(),(0,r.createElementBlock)("div",s,[(0,r.createElementVNode)("div",l,[(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.t("components.monitorTab.noMonitors")),1)])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",o,[(0,r.createElementVNode)("div",n,[(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.t("components.monitorTab.notEnabled")),1)])]))}var d=a(5359),u=a(6501),h=a(2027),p=a(4373),f=a(1261),m=a(275),v=a(9091),b={name:"MonitorTab",components:{SortableTable:h.A,HealthState:v.A,LiveDate:u.A},props:{resource:{type:Object,required:!0}},data(){return{MONITOR_HEADERS:m.w,observed:!1,urn:"",url:"",monitors:[]}},computed:{...(0,d.L8)(["currentCluster"]),clusterId(){return this.currentCluster?.id},hasMonitors(){return this.monitors?.length>0},componentIdentifier(){const e=this.currentCluster?.spec.displayName;if(!e)return"";let t=`urn:kubernetes:/${e}`;return this.resource?.metadata?.namespace&&(t+=`:${this.resource.metadata.namespace}`),t+=`:${(0,p.Di)(this.resource?.type?.toLowerCase())}/${this.resource?.metadata?.name}`,t}},async fetch(){if(!(0,p.Fg)(this.$store))return;const e=await(0,f.X)(this.$store,this.clusterId);if(this.observed=e?.length>0,!this.observed)return;const t=await(0,p.$8)(this.$store);this.urn=this.componentIdentifier;const a=await(0,p.of)(this.$store,t,this.urn);a&&(this.monitors=a.syncedCheckStates,this.url=t.spec.url)}},g=(a(2404),a(7433));const y=(0,g.A)(b,[["render",i],["__scopeId","data-v-45c8d05f"]]);var k=y},5685:function(e,t,a){"use strict";a.r(t);var r=a(6758),o=a.n(r),n=a(6173),s=a.n(n),l=s()(o());l.push([e.id,".healthstate-green[data-v-2ec76faa]{color:#2b9e40}.healthstate-orange[data-v-2ec76faa]{color:#ff8a1e}.healthstate-red[data-v-2ec76faa]{color:#eb5757}.healthstate-grey[data-v-2ec76faa]{color:#878e98}.healthstate-skeleton[data-v-2ec76faa]{cursor:wait;color:#d9d9d9;background-color:#d9d9d9}.healthstate[data-v-2ec76faa]{display:inline-block;border-width:1px;border-style:solid;border-radius:20px;padding:2px 10px;height:21px;line-height:16px;text-transform:uppercase;font-size:.75rem;letter-spacing:.3px;font-weight:500}",""]),t["default"]=l},1412:function(e,t,a){"use strict";a.r(t);var r=a(6758),o=a.n(r),n=a(6173),s=a.n(n),l=s()(o());l.push([e.id,"div.card[data-v-45c8d05f]{line-height:19px;font-size:14px;align-items:center;display:flex}span.spacer[data-v-45c8d05f]{margin-left:4px}",""]),t["default"]=l},3541:function(e,t,a){var r=a(5685);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var o=a(4825).A;o("ada042fc",r,!0,{sourceMap:!1,shadowMode:!1})},2404:function(e,t,a){var r=a(1412);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var o=a(4825).A;o("01aa474c",r,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=observability-2.0.1.umd.min.505.js.map