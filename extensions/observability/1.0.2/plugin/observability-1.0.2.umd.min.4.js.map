{"version":3,"sources":["webpack://observability-1.0.2/./components/Health/HealthState.vue?5f65","webpack://observability-1.0.2/./components/ComponentHealth.vue?a606","webpack://observability-1.0.2/./components/Health/HealthState.vue","webpack://observability-1.0.2/components/Health/HealthState.vue","webpack://observability-1.0.2/./components/Health/HealthState.vue?b6e1","webpack://observability-1.0.2/./components/Health/HealthState.vue?e71d","webpack://observability-1.0.2/./components/Health/HealthState.vue?40d7","webpack://observability-1.0.2/./components/ComponentHealth.vue?1f37","webpack://observability-1.0.2/./components/ComponentHealth.vue?05fa","webpack://observability-1.0.2/./modules/urn.ts","webpack://observability-1.0.2/./modules/observed.ts","webpack://observability-1.0.2/./components/Health/HealthState.vue?dd98","webpack://observability-1.0.2/./components/ComponentHealth.vue","webpack://observability-1.0.2/components/ComponentHealth.vue","webpack://observability-1.0.2/./components/ComponentHealth.vue?bfdb","webpack://observability-1.0.2/./components/ComponentHealth.vue?f4e6"],"names":["___CSS_LOADER_API_IMPORT___","exports","push","module","i","render","_vm$health","_vm","this","_c","_self","class","badgeColor","_v","_s","health","staticRenderFns","name","props","type","String","default","color","computed","HEALTH_STATE_TYPES","CLEAR","DEVIATING","CRITICAL","UNKNOWN","NOT_MONITORED","component","content","__esModule","locals","add","buildUrn","clusterName","_component$metadata","_component$metadata2","kind","mapKind","toLowerCase","Error","namespace","metadata","STS_CLUSTER","STS_NODE","STS_NAMESPACE","async","isObserved","store","clusterId","_response$data","response","dispatch","url","data","filter","depl","_depl$metadata","labels","staticClass","t","attrs","components","HealthState","resource","Object","required","observed","urn","mapGetters","_this$currentCluster","currentCluster","id","componentIdentifier","_this$currentCluster2","cluster","spec","displayName","isCrdLoaded","$store","obs","length","settings","loadSuseObservabilitySettings","loadComponent","state","healthState"],"mappings":"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","file":"observability-1.0.2.umd.min.4.js","sourcesContent":["// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".healthstate-green[data-v-2ec76faa]{color:#2b9e40}.healthstate-orange[data-v-2ec76faa]{color:#ff8a1e}.healthstate-red[data-v-2ec76faa]{color:#eb5757}.healthstate-grey[data-v-2ec76faa]{color:#878e98}.healthstate-skeleton[data-v-2ec76faa]{cursor:wait;color:#d9d9d9;background-color:#d9d9d9}.healthstate[data-v-2ec76faa]{display:inline-block;border-width:1px;border-style:solid;border-radius:20px;padding:2px 10px;height:21px;line-height:16px;text-transform:uppercase;font-size:.75rem;letter-spacing:.3px;font-weight:500}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComponentHealth.vue?vue&type=style&index=0&id=4c4a87e6&prod&lang=scss&scoped=true\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('span',{class:`healthstate healthstate-${_vm.badgeColor}`},[_vm._v(\" \"+_vm._s(_vm.health ?? \"LOADING\")+\" \")])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { HEALTH_STATE_TYPES } from '../../types/types';\n\nexport default {\n  name:  'HealthState',\n  props: {\n    health: { type: String, default: null },\n    color:  { type: String, default: null },\n  },\n\n  computed: {\n    badgeColor() {\n      if (this.color) {\n        return this.color;\n      }\n\n      switch (this.health) {\n      case HEALTH_STATE_TYPES.CLEAR:\n        return 'green';\n      case HEALTH_STATE_TYPES.DEVIATING:\n        return 'orange';\n      case HEALTH_STATE_TYPES.CRITICAL:\n        return 'red';\n      case HEALTH_STATE_TYPES.UNKNOWN:\n      case HEALTH_STATE_TYPES.NOT_MONITORED:\n        return 'grey';\n      default:\n        return 'skeleton';\n      }\n    },\n  },\n};\n</script>\n<template>\n  <span :class=\"`healthstate healthstate-${badgeColor}`\">\n    {{ health ?? \"LOADING\" }}\n  </span>\n</template>\n\n<style lang=\"scss\" scoped>\n.healthstate-green {\n  color: rgb(43, 158, 64);\n}\n\n.healthstate-orange {\n  color: rgb(255, 138, 30);\n}\n\n.healthstate-red {\n  color: rgb(235, 87, 87);\n}\n\n.healthstate-grey {\n  color: rgb(135, 142, 152);\n}\n\n.healthstate-skeleton {\n  cursor: wait;\n  color: rgb(217, 217, 217);\n  background-color: rgb(217, 217, 217);\n}\n\n.healthstate {\n  display: inline-block;\n  border-width: 1px;\n  border-style: solid;\n  border-radius: 20px;\n  padding: 2px 10px;\n  height: 21px;\n  line-height: 16px;\n  text-transform: uppercase;\n  font-size: 0.75rem;\n  letter-spacing: 0.3px;\n  font-weight: 500;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HealthState.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HealthState.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./HealthState.vue?vue&type=template&id=2ec76faa&scoped=true\"\nimport script from \"./HealthState.vue?vue&type=script&lang=js\"\nexport * from \"./HealthState.vue?vue&type=script&lang=js\"\nimport style0 from \"./HealthState.vue?vue&type=style&index=0&id=2ec76faa&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2ec76faa\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HealthState.vue?vue&type=style&index=0&id=2ec76faa&prod&lang=scss&scoped=true\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComponentHealth.vue?vue&type=style&index=0&id=4c4a87e6&prod&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"32e51726\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".health-block[data-v-4c4a87e6]{line-height:19px;font-size:14px;align-items:center;display:flex}.health-block .health-state-block[data-v-4c4a87e6]{margin-left:12px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import {\n  mapKind, STS_CLUSTER,\n  STS_NAMESPACE,\n  STS_NODE\n} from './suseObservability';\n\nexport function buildUrn(component: any, clusterName: string | undefined): string | undefined {\n  if (!component.type) {\n    return undefined;\n  }\n\n  const kind = mapKind(component.type.toLowerCase());\n\n  if (!clusterName) {\n    throw new Error(`Cluster name is required for ${ kind } URN`);\n  }\n\n  const namespace = component.metadata?.namespace;\n  const name = component.metadata?.name || component.name;\n\n  switch (kind) {\n  case STS_CLUSTER:\n    return `urn:cluster:/${ clusterName }`;\n  case STS_NODE:\n    return `urn:kubernetes:/${ clusterName }:node/${ name }`;\n  case STS_NAMESPACE:\n    return `urn:kubernetes:/${ clusterName }:namespace/${ name }`;\n  default:\n    return `urn:kubernetes:/${ clusterName }:${ namespace }:${ kind }/${ name }`;\n  }\n}\n","export async function isObserved(\n  store: any,\n  clusterId: string\n): Promise<any> {\n  const response = await store.dispatch(`cluster/request`, { url: `/k8s/clusters/${ clusterId }/v1/apps.deployments` });\n\n  return response?.data?.filter(\n    (depl: any) => depl.metadata?.labels && (\n      depl.metadata.labels['app.kubernetes.io/name'] === 'suse-observability-agent' ||\n      // backwards compatibility\n      depl.metadata.labels['app.kubernetes.io/name'] === 'stackstate-k8s-agent')\n  );\n}\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HealthState.vue?vue&type=style&index=0&id=2ec76faa&prod&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"10012e96\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"health-block\"},[_c('p',[_vm._v(_vm._s(_vm.t(\"components.componentHealth.title\")))]),_c('HealthState',{staticClass:\"health-state-block\",attrs:{\"health\":_vm.health}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { mapGetters } from 'vuex';\nimport { isCrdLoaded, loadComponent, loadSuseObservabilitySettings } from '../modules/suseObservability';\nimport { buildUrn } from '../modules/urn';\nimport { isObserved } from '../modules/observed';\nimport { HEALTH_STATE_TYPES } from '../types/types';\nimport HealthState from './Health/HealthState.vue';\n\nexport default {\n  name:       'ComponentHealth',\n  components: { HealthState },\n  props:      {\n    resource: {\n      type:     Object,\n      required: true,\n    }\n  },\n  data() {\n    return {\n      observed: false,\n      health:   HEALTH_STATE_TYPES.UNKNOWN,\n      urn:      '',\n    };\n  },\n  computed: {\n    ...mapGetters(['currentCluster']),\n\n    clusterId() {\n      return this.currentCluster?.id;\n    },\n\n    componentIdentifier() {\n      const cluster = this.currentCluster?.spec.displayName;\n\n      return buildUrn(this.resource, cluster);\n    },\n  },\n  async fetch() {\n    if (!isCrdLoaded(this.$store)) {\n      return;\n    }\n    const obs = await isObserved(this.$store, this.clusterId);\n\n    this.observed = obs.length > 0;\n\n    if (!this.observed) {\n      return;\n    }\n\n    const settings = await loadSuseObservabilitySettings(this.$store);\n\n    this.urn = this.componentIdentifier;\n    if (!this.urn || !settings) {\n      return;\n    }\n\n    const component = await loadComponent(this.$store, settings, this.urn);\n\n    this.health = component.state.healthState;\n  },\n};\n</script>\n<template>\n  <div class=\"health-block\">\n    <p>{{ t(\"components.componentHealth.title\") }}</p>\n    <HealthState class=\"health-state-block\" :health=\"health\" />\n  </div>\n</template>\n<style lang=\"scss\" scoped>\n.health-block {\n  line-height: 19px;\n  font-size: 14px;\n  align-items: center;\n  display: flex;\n\n  .health-state-block {\n    margin-left: 12px;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComponentHealth.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComponentHealth.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ComponentHealth.vue?vue&type=template&id=4c4a87e6&scoped=true\"\nimport script from \"./ComponentHealth.vue?vue&type=script&lang=js\"\nexport * from \"./ComponentHealth.vue?vue&type=script&lang=js\"\nimport style0 from \"./ComponentHealth.vue?vue&type=style&index=0&id=4c4a87e6&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4c4a87e6\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}