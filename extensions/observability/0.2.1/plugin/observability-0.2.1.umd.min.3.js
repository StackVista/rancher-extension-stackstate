(("undefined"!==typeof self?self:this)["webpackJsonpobservability_0_2_1"]=("undefined"!==typeof self?self:this)["webpackJsonpobservability_0_2_1"]||[]).push([[3],{"06c8":function(t,e,a){var s=a("2b0a");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var r=a("0ed3").default;r("5e330108",s,!0,{sourceMap:!1,shadowMode:!1})},"0ff0":function(t,e,a){"use strict";a("fa8f")},"297f":function(t,e,a){var s=a("5eaa");e=s(!1),e.push([t.i,".healthstate-green[data-v-52b3cd62]{color:#2b9e40;border-color:#2b9e40}.healthstate-orange[data-v-52b3cd62]{color:#ff8a1e;border-color:#ff8a1e}.healthstate-red[data-v-52b3cd62]{border-color:#eb5757;color:#eb5757}.healthstate-grey[data-v-52b3cd62]{border-color:#878e98;color:#878e98}.healthstate-green[data-v-52b3cd62],.healthstate-grey[data-v-52b3cd62],.healthstate-orange[data-v-52b3cd62],.healthstate-red[data-v-52b3cd62]{display:inline-block;border-width:1px;border-style:solid;border-radius:20px;padding:2px 10px;height:21px;line-height:16px;text-transform:uppercase;font-size:.75rem;letter-spacing:.3px;font-weight:500}",""]),t.exports=e},"2b0a":function(t,e,a){var s=a("5eaa");e=s(!1),e.push([t.i,".healthdisc-CLEAR[data-v-5be2562a]{background-color:#2b9e40}.healthdisc-DEVIATING[data-v-5be2562a]{background-color:#ff8a1e}.healthdisc-CRITICAL[data-v-5be2562a]{background-color:#eb5757}.healthdisc-UNKNOWN[data-v-5be2562a]{background-color:#878e98}.healthdisc-CLEAR[data-v-5be2562a],.healthdisc-CRITICAL[data-v-5be2562a],.healthdisc-DEVIATING[data-v-5be2562a],.healthdisc-UNKNOWN[data-v-5be2562a]{display:inline-block;box-sizing:border-box;border-radius:9999px;width:8px;height:8px}",""]),t.exports=e},5196:function(t,e,a){var s=a("ef0a");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var r=a("0ed3").default;r("7585bae3",s,!0,{sourceMap:!1,shadowMode:!1})},"5ed2":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("span",[e("div",{class:"healthstate-"+t.badgeColor},[e("span",[t._v(t._s(t.state))])])])},r=[],i=a("a111"),o={name:"HealthState",props:{state:{type:String,default:i["b"].UNKNOWN},color:{type:String,default:null}},computed:{badgeColor(){if(this.color)return this.color;switch(this.state){case i["b"].CLEAR:return"green";case i["b"].DEVIATING:return"orange";case i["b"].CRITICAL:return"red";case i["b"].UNKNOWN:case i["b"].NOT_MONITORED:return"grey"}return this.state}}},c=o,n=(a("0ff0"),a("d802")),d=Object(n["a"])(c,s,r,!1,null,"52b3cd62",null);e["a"]=d.exports},6444:function(t,e,a){"use strict";t.exports=function(t,e){return e||(e={}),t=t&&t.__esModule?t.default:t,"string"!==typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},"648b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"stackstate-card"},[e("div",{staticClass:"logo"}),e("div",{staticClass:"stackstate-card-content"},[t.$fetchState.pending?e("p",[t._v(" "+t._s(t.t("observability.clusterCard.connecting"))+" ")]):t.isConfigured?t.isConfigured&&!t.isObserved?e("div",[e("p",{staticClass:"mb-20"},[t._v(" "+t._s(t.t("observability.clusterCard.clusterIs"))+" "),e("HealthState",{staticClass:"state-badge",attrs:{state:"unobserved",color:"grey"}})],1),e("div",{staticClass:"flex-text"},[e("p",[t._v(t._s(t.t("observability.clusterCard.notObservedPrepend")))]),e("router-link",{attrs:{to:t.chartRoute}},[t._v(" "+t._s(t.t("observability.clusterCard.notObservedInstall"))+" ")]),e("p",[t._v(t._s(t.t("observability.clusterCard.notObservedPostpend")))])],1)]):e("div",[e("p",{staticClass:"mb-20"},[t._v(" "+t._s(t.t("observability.clusterCard.clusterHealth"))+" "),e("HealthState",{attrs:{state:"observed",color:"green"}})],1),e("div",[e("p",[t._v(t._s(t.t("observability.clusterCard.componentsHealth")))]),e("p",[e("HealthDisc",{attrs:{state:t.HEALTH_STATE_TYPES.DEVIATING}}),t._v(" "+t._s(t.t("observability.clusterCard.deviating"))+" "),e("span",{staticClass:"item-count"},[t._v(t._s(t.countDeviating))])],1),e("p",[e("HealthDisc",{attrs:{state:t.HEALTH_STATE_TYPES.CRITICAL}}),t._v(" "+t._s(t.t("observability.clusterCard.critical"))+" "),e("span",{staticClass:"item-count"},[t._v(t._s(t.countCritical))])],1)])]):e("div",{staticClass:"flex-text"},[e("p",[t._v(t._s(t.t("observability.clusterCard.notConnectedPrepend")))]),e("router-link",{attrs:{to:t.extensionDashboardRoute}},[t._v(" "+t._s(t.t("observability.clusterCard.notConnectedObservability"))+" ")])],1)])])},r=[],i=a("da25"),o=a("dd22"),c=a("d395"),n=a("a111"),d=a("5ed2"),l=function(){var t=this,e=t._self._c;return e("div",{class:"healthdisc-"+t.state})},u=[],h={name:"HealthDisc",props:{state:{type:String,default:n["b"].UNKNOWN}}},b=h,v=(a("9926"),a("d802")),p=Object(v["a"])(b,l,u,!1,null,"5be2562a",null),f=p.exports,g={name:"ObservabilityClusterCard",components:{HealthState:d["a"],HealthDisc:f},props:{resource:{type:Object,required:!0}},computed:{countDeviating(){return this.deviating},countHealthy(){return this.healthy},countCritical(){return this.critical},isObserved(){return this.observed.length>0},chartRoute(){var t;return{name:"c-cluster-apps-charts-chart",params:{[i["b"]]:null===(t=this.resource)||void 0===t?void 0:t.id},query:{[i["d"]]:"cluster",[i["c"]]:"rancher-partner-charts",[i["a"]]:"stackstate-k8s-agent"}}}},data(){return{observed:[],snapshot:void 0,deviating:0,critical:0,healthy:0,isConfigured:!0,HEALTH_STATE_TYPES:n["b"],extensionDashboardRoute:{name:n["f"]+"-c-cluster-dashboard",params:{[i["b"]]:n["a"]}}}},async fetch(){if(this.isMissingCrd=!Object(o["g"])(this.$store),this.isMissingCrd)return void(this.isConfigured=!1);const t=await Object(o["j"])(this.$store);if(!t)return void(this.isConfigured=!1);const e=await Object(c["a"])(this.$store,this.resource.id);if(e){this.snapshot=await Object(o["f"])(this.$store,`not healthstate in ("CLEAR", "UNKNOWN") AND label = "cluster-name:${this.resource.spec.displayName}"`,t);for(const t of this.snapshot.viewSnapshotResponse.components)"DEVIATING"===t.state.healthState?this.deviating++:"CRITICAL"===t.state.healthState?this.critical++:"HEALTHY"===t.state.healthState&&this.healthy++;this.observed=e}}},_=g,C=(a("b8a4"),Object(v["a"])(_,s,r,!1,null,"0fd487e1",null));e["default"]=C.exports},9926:function(t,e,a){"use strict";a("06c8")},b8a4:function(t,e,a){"use strict";a("5196")},d395:function(t,e,a){"use strict";async function s(t,e){var a;const s=await t.dispatch("cluster/request",{url:`/k8s/clusters/${e}/v1/apps.deployments`});return null===s||void 0===s||null===(a=s.data)||void 0===a?void 0:a.filter(t=>{var e;return(null===(e=t.metadata)||void 0===e?void 0:e.labels)&&"stackstate-k8s-agent"===t.metadata.labels["app.kubernetes.io/name"]})}a.d(e,"a",(function(){return s}))},ef0a:function(t,e,a){var s=a("5eaa"),r=a("6444"),i=a("a492");e=s(!1);var o=r(i);e.push([t.i,".stackstate-card[data-v-0fd487e1]{line-height:19px;font-size:14px;align-items:center;display:flex;margin-top:30px}.stackstate-card .logo[data-v-0fd487e1]{background-size:contain;background-repeat:no-repeat;width:100px;height:100px;margin-right:16px;background-image:url("+o+")}.stackstate-card .stackstate-card-content[data-v-0fd487e1]{display:flex;flex-direction:column}.stackstate-card .stackstate-card-content .state-badge[data-v-0fd487e1]{margin-left:6px}.stackstate-card .stackstate-card-content .flex-text[data-v-0fd487e1]{display:flex}.stackstate-card .stackstate-card-content .flex-text a[data-v-0fd487e1]{margin:0 3px}.stackstate-card .stackstate-card-content .item-count[data-v-0fd487e1]{margin-left:8px}.theme-dark div.logo[data-v-0fd487e1]{background-image:url("+o+");filter:invert(1)}",""]),t.exports=e},fa8f:function(t,e,a){var s=a("297f");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var r=a("0ed3").default;r("03d936a6",s,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=observability-0.2.1.umd.min.3.js.map