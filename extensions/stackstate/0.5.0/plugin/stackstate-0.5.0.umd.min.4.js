(("undefined"!==typeof self?self:this)["webpackJsonpstackstate_0_5_0"]=("undefined"!==typeof self?self:this)["webpackJsonpstackstate_0_5_0"]||[]).push([[4],{4680:function(t,e,a){var s=a("5eaa");e=s(!1),e.push([t.i,".healthstate-green[data-v-a8e366d2]{color:#2b9e40;border-color:#2b9e40}.healthstate-orange[data-v-a8e366d2]{color:#ff8a1e;border-color:#ff8a1e}.healthstate-red[data-v-a8e366d2]{border-color:#eb5757;color:#eb5757}.healthstate-grey[data-v-a8e366d2]{border-color:#878e98;color:#878e98}.healthstate-green[data-v-a8e366d2],.healthstate-grey[data-v-a8e366d2],.healthstate-orange[data-v-a8e366d2],.healthstate-red[data-v-a8e366d2]{display:inline-block;border-width:1px;border-style:solid;border-radius:20px;padding:2px 10px;height:21px;line-height:16px;text-transform:uppercase;font-size:.75rem;letter-spacing:.3px;font-weight:500}",""]),t.exports=e},4706:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return t.observed?t.hasMonitors?e("div",{staticClass:"sortable-table-list-container"},[e("table",{staticClass:"sortable-table top-divider",attrs:{width:"100%"}},[t._m(2),e("tbody",t._l(t.monitors,(function(a){return e("tr",{key:a.checkStateId,staticClass:"main-row"},[e("td",{staticClass:"col-badge-state-formatter",attrs:{align:"center"}},[e("HealthState",{attrs:{state:a.health}})],1),e("td",[e("a",{attrs:{href:`https://${t.url}/#/components/${encodeURIComponent(t.urn)}`,target:"_blank"}},[t._v(t._s(a.name))])]),e("td",[e("LiveDate",{attrs:{value:a.lastUpdateTimestamp}})],1)])})),0)])]):e("div",[t._m(1)]):e("div",[t._m(0)])},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[e("span",[t._v("Rancher Prime Observability is not enabled for this cluster.")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[e("span",[t._v("No monitors found for this component.")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",{staticClass:"sortable",attrs:{align:"left",width:"110px"}},[e("div",{staticClass:"table-header-container"},[e("span",[t._v("State")])])]),e("th",{attrs:{align:"left"}},[e("div",{staticClass:"table-header-container"},[e("span",[t._v("Monitor")])])]),e("th",{attrs:{align:"left"}},[e("div",{staticClass:"table-header-container"},[e("span",[t._v("Last update")])])])])])}],i=a("9ce4"),n=function(){var t=this,e=t._self._c;return t.suffixedLabel?t.showTooltip?e("span",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:{content:t.title,placement:t.tooltipPlacement},expression:"{content: title, placement: tooltipPlacement}"}],staticClass:"live-date"},[t._v(" "+t._s(t.suffixedLabel)+" ")]):e("span",{staticClass:"live-date"},[t._v(" "+t._s(t.suffixedLabel)+" ")]):e("span",{staticClass:"text-muted"},[t._v(" â€” ")])},l=[],o=a("050d"),d=a.n(o),c=a("5000"),u=a("2cb5");const h=[60,60,24],p=["sec","min","hour","day"];function f(t,e,a){const s=d()();e=e||s;const r=t.diff(e,"seconds");let i=Math.abs(r),n=1,l="?",o=0;while(i>=h[o]&&o<h.length)i/=h[o],n*=Math.floor(h[o]/10),o++;l=i<5?Math.floor(10*i)/10:Math.floor(i);const c={diff:r,absDiff:i,label:l,unitsKey:"unit."+p[o],units:p[o],next:n};return a&&(c.string=`${c.label} ${a(c.unitsKey,{count:c.label})}`),c}var b={props:{value:{type:[String,Number],default:""},addSuffix:{type:Boolean,default:!1},addPrefix:{type:Boolean,default:!1},suffix:{type:String,default:"ago"},tooltipPlacement:{type:String,default:"auto"},showTooltip:{type:Boolean,default:!0}},mounted(){this.liveUpdate(d()())},data(){return{label:"-"}},computed:{title(){if(!this.value)return"";const t=Object(u["e"])(this.$store.getters["prefs/get"](c["c"])),e=Object(u["e"])(this.$store.getters["prefs/get"](c["g"])),a=d()(this.value).format(`${t} ${e}`);return a},suffixedLabel(){if(!this.value)return this.label;let t=this.label||"";if(t&&this.addSuffix){const e=this.$store.getters["i18n/exists"],a="suffix."+this.suffix,s=e(a)?this.t(a):this.suffix;t=`${t} ${s}`}return t},dayValue(){return this.value?d()(this.value):null}},watch:{value(){this.liveUpdate(d()())}},methods:{liveUpdate(t){if(!this.dayValue)return"-"!==this.label&&(this.label="-"),300;const e=f(this.dayValue,t),a=e.diff<0||!this.addPrefix?"":"-";let s=e.label;return 0===e.diff?s="Just now":(s+=` ${a}${this.t(e.unitsKey,{count:e.label})}`,s=s.trim()),this.label!==s&&(this.label=s),e.next||1}}},v=b,g=a("d802"),m=Object(g["a"])(v,n,l,!1,null,null,null),x=m.exports,_=a("dd22"),y=a("d395"),C=a("5ed2"),w={name:"MonitorTab",components:{HealthState:C["a"],LiveDate:x},props:{resource:Object},data(){return{observed:!1,urn:"",url:"",monitors:[]}},computed:{...Object(i["a"])(["currentCluster"]),clusterId(){var t;return null===(t=this.currentCluster)||void 0===t?void 0:t.id},hasMonitors(){return this.monitors.length>0},componentIdentifier(){var t;const e=null===(t=this.currentCluster)||void 0===t?void 0:t.spec.displayName;if(!e)return"";let a="urn:kubernetes:/"+e;return this.resource.metadata.namespace&&(a+=":"+this.resource.metadata.namespace),a+=`:${Object(_["k"])(this.resource.type.toLowerCase())}/${this.resource.metadata.name}`,a}},async fetch(){const t=await Object(y["a"])(this.$store,this.clusterId);if(this.observed=t.length>0,!this.observed)return;const e=await Object(_["j"])(this.$store);this.urn=this.componentIdentifier;const a=await Object(_["g"])(this.$store,e,this.urn);this.monitors=a.syncedCheckStates,this.url=e.spec.url}},$=w,k=(a("9fbb"),Object(g["a"])($,s,r,!1,null,"3ba67ab2",null));e["default"]=k.exports},"5ed2":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("span",[e("div",{class:"healthstate-"+t.badgeColor},[e("span",[t._v(t._s(t.state))])])])},r=[],i={name:"HealthState",props:{state:{type:String,default:"UNKNOWN"},color:{type:String,default:null}},computed:{badgeColor(){if(this.color)return this.color;switch(this.state){case"CLEAR":return"green";case"DEVIATING":return"orange";case"CRITICAL":return"red";case"UNKNOWN":case"NOT MONITORED":return"grey"}return this.state}}},n=i,l=(a("c5e2"),a("d802")),o=Object(l["a"])(n,s,r,!1,null,"a8e366d2",null);e["a"]=o.exports},"5feb":function(t,e,a){var s=a("5eaa");e=s(!1),e.push([t.i,"table.sortable-table[data-v-3ba67ab2]{border-collapse:collapse;width:100%;outline:1px solid var(--border);background:var(--sortable-table-bg)}div.card[data-v-3ba67ab2]{line-height:19px;font-size:14px;align-items:center;display:flex}span.spacer[data-v-3ba67ab2]{margin-left:4px}.table-header-container span[data-v-3ba67ab2]{line-height:28px;height:28px;font-weight:400}thead tr[data-v-3ba67ab2]{background:var(--sortable-table-header-bg);border-bottom:1px solid var(--border)}th[data-v-3ba67ab2]:first-of-type{padding-left:10px;padding-right:5px;padding-top:8px;padding-bottom:8px}th[data-v-3ba67ab2]{padding:8px 5px}",""]),t.exports=e},"915e":function(t,e,a){var s=a("5feb");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var r=a("0ed3").default;r("3aaa1caa",s,!0,{sourceMap:!1,shadowMode:!1})},"9c02":function(t,e,a){var s=a("4680");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var r=a("0ed3").default;r("798030ed",s,!0,{sourceMap:!1,shadowMode:!1})},"9fbb":function(t,e,a){"use strict";a("915e")},c5e2:function(t,e,a){"use strict";a("9c02")},d395:function(t,e,a){"use strict";async function s(t,e){const a=await t.dispatch("cluster/request",{url:`/k8s/clusters/${e}/v1/apps.deployments`});return a.data.filter(t=>t.metadata.labels&&"stackstate-k8s-agent"===t.metadata.labels["app.kubernetes.io/name"])}a.d(e,"a",(function(){return s}))}}]);
//# sourceMappingURL=stackstate-0.5.0.umd.min.4.js.map