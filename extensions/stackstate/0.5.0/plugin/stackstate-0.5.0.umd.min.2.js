(("undefined"!==typeof self?self:this)["webpackJsonpstackstate_0_5_0"]=("undefined"!==typeof self?self:this)["webpackJsonpstackstate_0_5_0"]||[]).push([[2],{4680:function(t,e,a){var s=a("5eaa");e=s(!1),e.push([t.i,".healthstate-green[data-v-a8e366d2]{color:#2b9e40;border-color:#2b9e40}.healthstate-orange[data-v-a8e366d2]{color:#ff8a1e;border-color:#ff8a1e}.healthstate-red[data-v-a8e366d2]{border-color:#eb5757;color:#eb5757}.healthstate-grey[data-v-a8e366d2]{border-color:#878e98;color:#878e98}.healthstate-green[data-v-a8e366d2],.healthstate-grey[data-v-a8e366d2],.healthstate-orange[data-v-a8e366d2],.healthstate-red[data-v-a8e366d2]{display:inline-block;border-width:1px;border-style:solid;border-radius:20px;padding:2px 10px;height:21px;line-height:16px;text-transform:uppercase;font-size:.75rem;letter-spacing:.3px;font-weight:500}",""]),t.exports=e},5084:function(t,e,a){var s=a("5eaa");e=s(!1),e.push([t.i,".healthdisc-CLEAR[data-v-7d21ebc4]{background-color:#2b9e40}.healthdisc-DEVIATING[data-v-7d21ebc4]{background-color:#ff8a1e}.healthdisc-CRITICAL[data-v-7d21ebc4]{background-color:#eb5757}.healthdisc-UNKNOWN[data-v-7d21ebc4]{background-color:#878e98}.healthdisc-CLEAR[data-v-7d21ebc4],.healthdisc-CRITICAL[data-v-7d21ebc4],.healthdisc-DEVIATING[data-v-7d21ebc4],.healthdisc-UNKNOWN[data-v-7d21ebc4]{display:inline-block;box-sizing:border-box;border-radius:9999px;width:8px;height:8px}",""]),t.exports=e},5890:function(t,e,a){"use strict";a("f536")},"5ed2":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("span",[e("div",{class:"healthstate-"+t.badgeColor},[e("span",[t._v(t._s(t.state))])])])},r=[],i={name:"HealthState",props:{state:{type:String,default:"UNKNOWN"},color:{type:String,default:null}},computed:{badgeColor(){if(this.color)return this.color;switch(this.state){case"CLEAR":return"green";case"DEVIATING":return"orange";case"CRITICAL":return"red";case"UNKNOWN":case"NOT MONITORED":return"grey"}return this.state}}},n=i,d=(a("c5e2"),a("d802")),o=Object(d["a"])(n,s,r,!1,null,"a8e366d2",null);e["a"]=o.exports},6444:function(t,e,a){"use strict";t.exports=function(t,e){return e||(e={}),t=t&&t.__esModule?t.default:t,"string"!==typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},"82e6":function(t,e,a){var s=a("9b12");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var r=a("0ed3").default;r("0ad441b4",s,!0,{sourceMap:!1,shadowMode:!1})},"88a4":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[t._m(0),e("span",{staticClass:"spacer"},[t._v(" ")]),e("div",{staticClass:"col"},[t.$fetchState.pending?e("div",[e("div",[e("span",[t._v(" "+t._s(t.t("observability.clusterCard.connecting"))+" ")])])]):t.isConfigured?t.isConfigured&&!t.isObserved?e("div",[e("div",[e("span",[t._v("Cluster is")]),e("span",{staticClass:"spacer"},[t._v(" ")]),e("HealthState",{attrs:{state:"unobserved",color:"grey"}})],1),t._m(1),e("div",[e("span",[t._v("Cluster is not observed by "+t._s(t.t("observability.name"))+". Please "),e("a",{attrs:{href:`/c/${t.resource.id}/apps/charts/chart?repo-type=cluster&repo=rancher-partner-charts&chart=stackstate-k8s-agent`}},[t._v("install")]),t._v(" the agent")])])]):e("div",[e("div",[e("span",[t._v(" Cluster health: ")]),e("span",{staticClass:"spacer"},[t._v(" ")]),e("HealthState",{attrs:{state:"observed",color:"green"}})],1),t._m(2),e("div",[e("span",[t._v("Component healths:")]),e("div",[e("HealthDisc",{attrs:{state:"DEVIATING"}}),t._v(" Deviating: "),e("span",{staticClass:"spacer"},[t._v(" ")]),t._v(" "+t._s(t.countDeviating)+" ")],1),e("div",[e("HealthDisc",{attrs:{state:"CRITICAL"}}),t._v(" Critical: "),e("span",{staticClass:"spacer"},[t._v(" ")]),t._v(" "+t._s(t.countCritical)+" ")],1)])]):e("div",[e("div",[e("span",[t._v(" "+t._s(t.t("observability.clusterCard.notConnected"))+" "),e("a",{attrs:{href:"/observability/c/_/observability.rancher.io.dashboard"}},[t._v(t._s(t.t("observability.name"))+" Configuration")])])])])])])},r=[function(){var t=this,e=t._self._c;return e("div",[e("span",[e("div",{staticClass:"logo"})])])},function(){var t=this,e=t._self._c;return e("div",[e("span",{staticClass:"spacer"},[t._v(" ")])])},function(){var t=this,e=t._self._c;return e("div",[e("span",{staticClass:"spacer"},[t._v(" ")])])}],i=a("dd22"),n=a("d395"),d=a("5ed2"),o=function(){var t=this,e=t._self._c;return e("div",{class:"healthdisc-"+t.state})},c=[],l={name:"HealthDisc",props:{state:{type:String,default:"UNKNOWN"}}},h=l,u=(a("5890"),a("d802")),p=Object(u["a"])(h,o,c,!1,null,"7d21ebc4",null),v=p.exports,f={name:"StackStateObservedCard",components:{HealthState:d["a"],HealthDisc:v},props:{resource:Object},computed:{countDeviating(){return this.deviating},countHealthy(){return this.healthy},countCritical(){return this.critical},isObserved(){return this.observed.length>0}},data(){return{observed:[],snapshot:void 0,deviating:0,critical:0,healthy:0,isConfigured:!0}},async fetch(){if(this.isMissingCrd=!Object(i["f"])(this.$store),this.isMissingCrd)return void(this.isConfigured=!1);const t=await Object(i["j"])(this.$store);if(!t)return void(this.isConfigured=!1);const e=await Object(n["a"])(this.$store,this.resource.id);if(e){this.snapshot=await Object(i["e"])(this.$store,`not healthstate in ("CLEAR", "UNKNOWN") AND label = "cluster-name:${this.resource.spec.displayName}"`,t);for(const t of this.snapshot.viewSnapshotResponse.components)"DEVIATING"===t.state.healthState?this.deviating++:"CRITICAL"===t.state.healthState?this.critical++:"HEALTHY"===t.state.healthState&&this.healthy++;this.observed=e}}},b=f,g=(a("fd27"),Object(u["a"])(b,s,r,!1,null,"1146fd9a",null));e["default"]=g.exports},"8e9f":function(t,e,a){t.exports=a.p+"img/sts.687d4636.svg"},"9b12":function(t,e,a){var s=a("5eaa"),r=a("6444"),i=a("a16d"),n=a("8e9f");e=s(!1);var d=r(i),o=r(n);e.push([t.i,"div.card[data-v-1146fd9a]{line-height:19px;font-size:14px;align-items:center;display:flex}span.header[data-v-1146fd9a]{font-size:18px}div.coldiv[data-v-1146fd9a]{padding-top:10px}div.col[data-v-1146fd9a]{display:flex;flex-direction:column}span.spacer[data-v-1146fd9a]{margin-left:4px}.alert[data-v-1146fd9a]{display:flex;align-items:center;padding:10px;margin:10px 0;border-radius:5px}div.logo[data-v-1146fd9a]{background-size:contain;background-repeat:no-repeat;width:100px;height:100px}.theme-light div.logo[data-v-1146fd9a]{background-image:url("+d+")}.theme-dark div.logo[data-v-1146fd9a]{background-image:url("+o+")}",""]),t.exports=e},"9c02":function(t,e,a){var s=a("4680");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var r=a("0ed3").default;r("798030ed",s,!0,{sourceMap:!1,shadowMode:!1})},a16d:function(t,e,a){t.exports=a.p+"img/sts-color.ff0814a4.svg"},c5e2:function(t,e,a){"use strict";a("9c02")},d395:function(t,e,a){"use strict";async function s(t,e){const a=await t.dispatch("cluster/request",{url:`/k8s/clusters/${e}/v1/apps.deployments`});return a.data.filter(t=>t.metadata.labels&&"stackstate-k8s-agent"===t.metadata.labels["app.kubernetes.io/name"])}a.d(e,"a",(function(){return s}))},f536:function(t,e,a){var s=a("5084");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var r=a("0ed3").default;r("2b718a8e",s,!0,{sourceMap:!1,shadowMode:!1})},fd27:function(t,e,a){"use strict";a("82e6")}}]);
//# sourceMappingURL=stackstate-0.5.0.umd.min.2.js.map