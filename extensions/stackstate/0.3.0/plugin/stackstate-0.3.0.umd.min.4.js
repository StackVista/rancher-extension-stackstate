(("undefined"!==typeof self?self:this)["webpackJsonpstackstate_0_3_0"]=("undefined"!==typeof self?self:this)["webpackJsonpstackstate_0_3_0"]||[]).push([[4],{"183b":function(e,t,a){"use strict";a("366f")},"353f":function(e,t,a){"use strict";a("7de1")},"366f":function(e,t,a){var r=a("fb98");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=a("0ed3").default;s("6585f7b5",r,!0,{sourceMap:!1,shadowMode:!1})},"706e":function(e,t,a){"use strict";var r=function(){var e=this,t=e._self._c;return t("span",[t("div",{class:"healthstate-"+e.badgeColor},[t("span",[e._v(e._s(e.state))])])])},s=[],n={name:"HealthState",props:{state:{type:String,default:"UNKNOWN"},color:{type:String,default:null}},computed:{badgeColor(){if(this.color)return this.color;switch(this.state){case"CLEAR":return"green";case"DEVIATING":return"orange";case"CRITICAL":return"red";case"UNKNOWN":case"NOT MONITORED":return"grey"}return this.state}}},o=n,i=(a("183b"),a("d802")),c=Object(i["a"])(o,r,s,!1,null,"9f0602f8",null);t["a"]=c.exports},"7de1":function(e,t,a){var r=a("e8ba");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=a("0ed3").default;s("b8aa3842",r,!0,{sourceMap:!1,shadowMode:!1})},d35b:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a("dd22");function s(e,t){var a,s;if(!e.type)return;const n=Object(r["i"])(e.type.toLowerCase());if(!t)throw new Error(`Cluster name is required for ${n} URN`);const o=null===(a=e.metadata)||void 0===a?void 0:a.namespace,i=(null===(s=e.metadata)||void 0===s?void 0:s.name)||e.name;switch(n){case r["a"]:return"urn:cluster:/"+t;case r["c"]:return`urn:kubernetes:/${t}:node/${i}`;case r["b"]:return`urn:kubernetes:/${t}:namespace/${i}`;default:return`urn:kubernetes:/${t}:${o}:${n}/${i}`}}},d395:function(e,t,a){"use strict";async function r(e,t){const a=await e.dispatch("cluster/request",{url:`/k8s/clusters/${t}/v1/apps.deployments`});return a.data.filter(e=>e.metadata.labels&&"stackstate-k8s-agent"===e.metadata.labels["app.kubernetes.io/name"])}a.d(t,"a",(function(){return r}))},e67e:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"card"},[t("div",[t("span",[e._v("Component health:")]),t("span",{staticClass:"spacer"},[e._v("Â ")]),t("HealthState",{attrs:{state:e.health}})],1)])},s=[],n=a("9ce4"),o=a("dd22"),i=a("d35b"),c=a("d395"),l=a("706e"),d={name:"ComponentHealth",components:{HealthState:l["a"]},props:{resource:Object},data(){return{observed:!1,health:"NOT MONITORED",urn:""}},computed:{...Object(n["a"])(["currentCluster"]),clusterId(){var e;return null===(e=this.currentCluster)||void 0===e?void 0:e.id},componentIdentifier(){var e;const t=null===(e=this.currentCluster)||void 0===e?void 0:e.spec.displayName;return Object(i["a"])(this.resource,t)}},async fetch(){const e=await Object(c["a"])(this.$store,this.clusterId);if(this.observed=e.length>0,!this.observed)return;const t=await Object(o["h"])(this.$store);if(this.urn=this.componentIdentifier,!this.urn)return;const a=await Object(o["e"])(this.$store,t,this.urn);this.health=a.state.healthState}},u=d,f=(a("353f"),a("d802")),h=Object(f["a"])(u,r,s,!1,null,"1df7df32",null);t["default"]=h.exports},e8ba:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,"div.card[data-v-1df7df32]{line-height:19px;font-size:14px;align-items:center;display:flex}span.spacer[data-v-1df7df32]{margin-left:4px}",""]),e.exports=t},fb98:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,".healthstate-green[data-v-9f0602f8]{color:#2b9e40;border-color:#2b9e40}.healthstate-orange[data-v-9f0602f8]{color:#ff8a1e;border-color:#ff8a1e}.healthstate-red[data-v-9f0602f8]{border-color:#eb5757;color:#eb5757}.healthstate-grey[data-v-9f0602f8]{border-color:#878e98;color:#878e98}.healthstate-green[data-v-9f0602f8],.healthstate-grey[data-v-9f0602f8],.healthstate-orange[data-v-9f0602f8],.healthstate-red[data-v-9f0602f8]{display:inline-block;border-width:1px;border-style:solid;border-radius:20px;padding:2px 10px;height:21px;line-height:16px;text-transform:uppercase;font-size:.75rem;letter-spacing:.3px;font-weight:500}",""]),e.exports=t}}]);
//# sourceMappingURL=stackstate-0.3.0.umd.min.4.js.map